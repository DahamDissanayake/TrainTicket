"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4722],{64816:function(e,t,i){i.d(t,{q:function(){return l}});var n=i(57437);let l=e=>{let{className:t,stroke:i="currentColor",height:l,width:a}=e;return(0,n.jsx)("svg",{width:null!=a?a:"26",height:null!=l?l:"24",viewBox:"0 0 26 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:(0,n.jsx)("path",{d:"M20.5834 12H5.41675M5.41675 12L13.0001 19M5.41675 12L13.0001 5",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}},49574:function(e,t,i){i.d(t,{G:function(){return l}});var n=i(57437);let l=e=>{let{className:t,stroke:i="currentColor",height:l=22,width:a=22}=e;return(0,n.jsx)("svg",{width:a,height:l,viewBox:"0 0 24 24",fill:"none",className:t,children:(0,n.jsx)("path",{d:"M16 17.0001L21 12.0001M21 12.0001L16 7.00006M21 12.0001H9M12 17.0001C12 17.2956 12 17.4434 11.989 17.5715C11.8748 18.902 10.8949 19.9969 9.58503 20.2573C9.45903 20.2824 9.31202 20.2987 9.01835 20.3314L7.99694 20.4448C6.46248 20.6153 5.69521 20.7006 5.08566 20.5055C4.27293 20.2455 3.60942 19.6516 3.26118 18.8725C3 18.2883 3 17.5163 3 15.9724V8.02776C3 6.48383 3 5.71186 3.26118 5.12758C3.60942 4.34854 4.27293 3.75467 5.08566 3.49459C5.69521 3.29953 6.46246 3.38478 7.99694 3.55528L9.01835 3.66877C9.31212 3.70141 9.45901 3.71773 9.58503 3.74279C10.8949 4.00322 11.8748 5.0981 11.989 6.42867C12 6.5567 12 6.70449 12 7.00006",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}},76556:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(57437),l=i(2265),a=i(92530),s=i(64816),r=i(57675),o=i(16463),c=e=>{let{title:t,onBackArrowClick:i,onMenuClick:c,hideBackBtn:d,hideMenuBtn:u}=e,h=(0,o.useRouter)(),[m,x]=(0,l.useState)(!1);return(0,n.jsxs)("div",{className:"bg-blue-700 fixed w-full  md:relative flex text-white-100 md:px-[34px] px-6 pt-[32px] pb-[24px] justify-between md:rounded-t-md z-20",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[!d&&(0,n.jsx)("div",{onClick:()=>{"Order Placed"!=t&&"Order Failed"!=t?i?i():window.history.back():h.push("/")},className:"mr-2",children:(0,n.jsx)(s.q,{})}),!u&&(0,n.jsx)("div",{onClick:()=>{null==c||c()},className:"mr-2",children:(0,n.jsx)(r.v2,{})}),(0,n.jsx)("h1",{className:"text-xl leading-5 font-semibold",children:t})]}),(0,n.jsx)("div",{className:"text-white-100 cursor-pointer md:hidden",onClick:()=>x(!0),children:(0,n.jsx)(r.vN,{height:24,width:24})}),m&&(0,n.jsx)(a.QJ,{onClose:()=>x(!1)})]})},d=i(96164),u=e=>{let{headerTitle:t,content:i,onBackArrowClick:l,onMenuClick:a,hideBackBtn:s=!1,hideMenuBtn:r=!0,containerClass:o}=e,u=(0,d.m6)("\nw-full md:w-[450px]  shadow-md md:rounded-md bg-white relative bg-white-100 md:min-h-0 md:overflow-hidden\n    ".concat(null!=o?o:"","\n  "));return(0,n.jsx)("div",{className:"flex items-center justify-center w-full mb-0 md:mb-2 md:mt-[60px]",children:(0,n.jsxs)("div",{className:u,children:[(0,n.jsx)(c,{onBackArrowClick:l,onMenuClick:a,title:t,hideBackBtn:s,hideMenuBtn:r}),(0,n.jsx)("div",{className:"pt-[80px] md:pt-0 mt-[-1px]",children:i})]})})}},33733:function(e,t,i){i.d(t,{Z:function(){return w}});var n=i(57437),l=i(2265),a=i(39946),s=i(57675),r=i(16463),o=i(18087),c=i(32483),d=i(5812),u=i(37646),h=i(49574),m=i(48933),x=e=>{let{}=e,t=(0,o.useTranslations)("Header"),i=(0,o.useLocale)(),x=(0,r.usePathname)(),p=(0,r.useRouter)(),{setLanguage:f}=(0,c.G)(e=>e),{passenger:g,clearPassengerState:v}=(0,d._)(e=>e),{clearAuthState:w}=(0,u.a)(e=>e),{reset:b}=(0,m.Q)(e=>e);(0,l.useEffect)(()=>{let e="en_US";"en"===i?e="en_US":"sn"===i?e="si_LK":"tn"===i&&(e="ta_LK"),f(e)},[i,f]);let j=[{label:t("home"),icon:(0,n.jsx)(s.SK,{height:24,width:24}),path:"myportal"},{label:t("buy_tickets"),icon:(0,n.jsx)(s.Sj,{height:24,width:24}),path:"buyticket"},{label:t("ticket_history"),icon:(0,n.jsx)(s.ct,{height:24,width:24}),path:"tickethistory"},{label:t("submit_refund"),icon:(0,n.jsx)(s.qo,{height:24,width:24}),path:"refundrequest"},{label:t("refund_request_history"),icon:(0,n.jsx)(s.pd,{height:24,width:24}),path:"refundhistory"},{label:t("profile"),icon:(0,n.jsx)(s.tB,{height:24,width:24}),path:"profile"},{label:t("sign_out"),icon:(0,n.jsx)(h.G,{height:24,width:24}),onClick:()=>{w(),b(),v(),localStorage.removeItem("lastVisitedUrl"),window.location.replace("/".concat(i,"/signin"))}}],k=e=>{let{item:t}=e;return(0,n.jsx)("li",{onClick:()=>{(null==t?void 0:t.onClick)?t.onClick():p.push("/".concat(i,"/").concat(t.path))},className:(0,a.cn)(" w-[248px] px-2 py-2 rounded-md",x==="/".concat(i,"/").concat(t.path)?"bg-black-400":"transparent"),children:(0,n.jsxs)("span",{className:(0,a.cn)("flex gap-3 font-normal items-center cursor-pointer text-base",x==="/".concat(i,"/").concat(t.path)?"text-white-100":"text-black-400"),children:[t.icon,t.label]})})};return(0,n.jsx)("div",{className:"w-[275px] h-full bg-white-100 flex flex-col items-center pt-10",children:(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("nav",{children:(0,n.jsx)("ul",{className:"space-y-3",children:(()=>{if(g)return j.map((e,t)=>(0,n.jsx)(k,{item:e},t))})()})})})})},p=i(66648),f=i(39032),g=i(13093),v=()=>{let e=(0,o.useTranslations)("MyPortal"),t=(0,o.useTranslations)("HonorTitle"),{passenger:i}=(0,d._)(e=>e),{apiKey:l}=(0,u.a)(),a=(null==i?void 0:i.first_name)?(null==i?void 0:i.first_name.charAt(0).toUpperCase())+(null==i?void 0:i.first_name.slice(1)):"",s=(null==i?void 0:i.last_name)?(null==i?void 0:i.last_name.charAt(0).toUpperCase())+(null==i?void 0:i.last_name.slice(1)):"";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-[calc(100%-275px)] absolute bg-black-900 bg-opacity-30 transition-opacity z-10  h-[116px]",children:(0,n.jsxs)("div",{className:"flex justify-between px-6",children:[(0,n.jsxs)("div",{className:"text-white-600 mt-[33px]",children:[(0,n.jsx)("p",{className:"text-lg font-semibold",children:e("home")}),(0,n.jsx)("p",{className:"text-base font-normal",children:"".concat((null==i?void 0:i.title)?(0,f.O9)(null==i?void 0:i.title,t):"").concat((null==i?void 0:i.first_name)?null==i?void 0:i.first_name:" "," ").concat((null==i?void 0:i.last_name)?null==i?void 0:i.last_name:"")})]}),(0,n.jsx)("div",{className:"relative mt-7",children:(null==i?void 0:i.profile_image)?(0,n.jsx)(p.default,{loader:e=>{let{src:t}=e;return t},src:"".concat(null==i?void 0:i.profile_image,"&token=").concat((0,g.p)(l)),height:68,width:68,alt:"avatar",style:{objectFit:"contain"},className:"w-[68px] h-[68px] rounded-full border-2"}):(0,n.jsx)("div",{className:"w-[68px] h-[68px] rounded-full border-2 border-white bg-blue-700 text-white flex items-center justify-center text-xl font-semibold",children:"".concat(a.charAt(0)).concat(s.charAt(0))})})]})}),(0,n.jsx)(p.default,{src:"/images/landing-page-main.png",alt:"slr-main",height:116,width:393,unoptimized:!0,className:"h-[118px] w-full object-cover"})]})},w=e=>{let{children:t}=e,i=(0,o.useLocale)(),l=(0,r.usePathname)();return(0,n.jsxs)("div",{className:"hidden md:flex h-full items-center justify-between w-full flex-row",children:[(0,n.jsx)(x,{}),(0,n.jsxs)("div",{className:"h-full flex flex-1 bg-blue-100 flex-col",children:[l==="/".concat(i,"/myportal")&&(0,n.jsx)(v,{}),t]})]})}},16955:function(e,t,i){i.d(t,{BP:function(){return r},Bx:function(){return u},cQ:function(){return a},dm:function(){return c},fS:function(){return s},gE:function(){return d},wZ:function(){return o}});var n=i(6072),l=i(54438);let a=async e=>(0,l.W)({method:"post",action:n.C.getTicketPrice,data:e}),s=async e=>(0,l.W)({method:"post",action:n.C.addOrder,data:e}),r=async e=>(0,l.W)({method:"post",action:n.C.resendTicket,data:e,baseURL:"OPERATIONS"}),o=async e=>{let t=await (0,l.W)({method:"post",action:n.C.getTicketDetails,data:e,baseURL:"OPERATIONS"});return null==t?void 0:t.data},c=async e=>await (0,l.W)({method:"post",action:n.C.getTtripDetails,data:e,baseURL:"OPERATIONS"}),d=async e=>await (0,l.W)({method:"post",action:n.C.submitResendTicket,data:e,baseURL:"OPERATIONS"}),u=async()=>(0,l.W)({method:"get",action:n.C.getActiveTickets,baseURL:"OPERATIONS"})},48933:function(e,t,i){i.d(t,{Q:function(){return s}});var n=i(16955),l=i(39099);let a={isLoading:!1,ticket:null,tripDetails:null,error:null,totalAmount:null,orderId:null,childCount:null,adultCount:null,account:null,accountType:null,ticketType:null,seasonTravelPeriod:null,mobileNo:null,email:null,activeTickets:[]},s=(0,l.Ue)(e=>({...a,getTicketDetails:async t=>{try{e(()=>({isLoading:!0,error:null}));let i=await (0,n.wZ)({ticketId:t});e(()=>({ticket:i,isLoading:!1}))}catch(t){var i;if(e(()=>({isLoading:!1,error:t.response.data.error.code})),(null==t?void 0:null===(i=t.response)||void 0===i?void 0:i.status)===401){let e=window.location.href,t=localStorage.getItem("lastVisitedUrl"),i=localStorage.getItem("previousToLastVisitedUrl");e.includes("signin")||e.includes("myportal")||(localStorage.setItem("formerVisitedUrl",i),localStorage.setItem("previousToLastVisitedUrl",t),localStorage.setItem("lastVisitedUrl",e)),window.location.replace("/en/signin")}}},getTripDetails:async t=>{try{e(()=>({isLoading:!0,error:null}));let i=await (0,n.dm)({orderNo:t});e(()=>({tripDetails:i,isLoading:!1}))}catch(t){e(()=>({isLoading:!1,error:t.response.data.error.code}))}},resendTicket:async(t,i)=>{try{e(()=>({isLoading:!0,error:null}));let l=await (0,n.BP)(t);l.success&&(e(()=>({isLoading:!1,error:null,mobileNo:l.data.mobileNumber,email:l.data.email})),i())}catch(t){e(()=>({isLoading:!1,error:t.response.data.error.code}))}},addOrder:async t=>{try{e(()=>({isLoading:!0,error:null}));let{data:{orderId:i}}=await (0,n.fS)(t);i&&e(()=>({orderId:i}))}catch(t){e(()=>({isLoading:!1,orderId:null,error:t.response.data.error.code}))}},submitResendTicket:async(t,i)=>{try{e(()=>({isLoading:!0,error:null})),(await (0,n.gE)(t)).success&&(e(()=>({isLoading:!1,error:null})),i())}catch(t){e(()=>{var e,i;return{isLoading:!1,error:null==t?void 0:null===(i=t.response)||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:e.error.code}})}},getActiveTickets:async()=>{try{e(()=>({isLoading:!0,error:null}));let t=await (0,n.Bx)();e(()=>({activeTickets:t,isLoading:!1}))}catch(t){e(()=>({isLoading:!1}))}},resetError:()=>{e(()=>({isLoading:!1,error:null}))},disableLoading:()=>{e(()=>({isLoading:!1}))},reset:()=>e(a)}))}}]);